{% load staticfiles %}

<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1" />
   <link rel="icon" href="data:;base64,=">
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="author" content="colorlib.com">
   <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900%7CPoppins:700" rel="stylesheet" />
   <link rel="stylesheet" href="{% static "css/main.css" %}" >
     <script src="//apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
 <script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
   <link rel="stylesheet" href="//apps.bdimg.com/libs/jqueryui/1.10.4/css/jquery-ui.min.css">

<!--
{#      <script src="static/js/jquery-3.4.1.min.js"></script>#}
   <script src="{% static "js/jquery-3.4.1.min.js" %}"></script>
-->
</head>

<body><!-- the template of search block was referenced from Colorlib (https://colorlib.com) -->
<div id="map"></div>       
<nav> <a href="" class="menuToggle" id="menuToggleIcon" title="Go Back" style="display: none"> <span class="navClosed"><i>Go Back</i></span></a>

    <div class="s011">
        <form>
            <fieldset>
                <legend>Dublin Bus</legend>
            </fieldset>
            <div class="inner-form">
                <div class="main-form" id="main-form">
                    <div class="row">
                        <div class="input-wrap">
                            <div class="icon-wrap">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path>
                                </svg>
                            </div>
                            <div class="input-field">
                                <label>Start</label>
                                <input type="text" class="locationInput" id="startInput" placeholder="Please type in your start" />

                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="input-wrap">
                            <div class="icon-wrap">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path>
                                </svg>
                            </div>
                            <div class="input-field">
                                <label>Destination</label>
                                <input type="text" class="locationInput" id="destitationInput" placeholder="Please type in your destination" />
                            </div>

                        </div>
                    </div>
                    <div class="row second">
                        <div class="input-wrap">
                            <div class="icon-wrap">
                                <svg xmlns="http://www.w3.org/2000/svg" width="612" height="612" viewBox="0 0 612 612">
                                    <path d="M543.981,160.777l-18.297,18.571c44.158,52.077,68.485,121.464,61.039,196.445   c-12.315,124.002-112.79,223.666-236.88,235.068c-146.688,13.479-271.77-94.371-286.28-234.55H37.712   c-15.717,0-25.54-17.015-17.681-30.626L77.85,245.565c7.859-13.609,27.503-13.608,35.361,0.001l57.806,100.122   c7.859,13.61-1.964,30.624-17.681,30.624h-22.505c14.622,104.658,112.057,183.152,223.772,166.778   c82.668-12.116,149.722-77.337,163.773-159.697c21.031-123.271-73.828-230.558-193.271-230.558   c-38.734,0-76.119,11.237-108.234,32.52c-14.904,9.876-35.564,7.922-46.498-6.224c-11.906-15.401-8.188-37.389,7.687-48.109   c34.455-23.276,73.515-37.822,114.438-42.886V50.184h-26.784c-9.216,0-16.686-7.47-16.686-16.686V16.686   C249.028,7.471,256.5,0,265.714,0h124.21c9.216,0,16.686,7.471,16.686,16.686v16.812c0,9.215-7.47,16.686-16.686,16.686h-29.501   v38.348c52.534,7.088,100.161,29.78,138.142,63.186l16.975-17.229l-12.439-11.499c-6.767-6.254-7.183-16.812-0.927-23.579   l13.31-14.4c6.255-6.768,16.812-7.183,23.579-0.928l50.312,46.505c6.769,6.255,7.183,16.812,0.929,23.579l-13.31,14.399   c-6.255,6.767-16.812,7.183-23.579,0.928L543.981,160.777z M361.604,314.24c-23.084-23.57-62.787-21.009-82.25,8.07   c-11.684,17.455-11.505,41.047,0.298,58.42c14.344,21.111,39.598,27.998,61.139,20.692l67.067,54.629   c12.822,10.443,29.816-6.398,19.489-19.313L373.5,369.393C380.224,350.844,376.333,329.28,361.604,314.24z" />
                                </svg>
                            </div>
                            <div class="input-field">
                                <label>When</label>
                                <div class="input-select">
                                    <select data-trigger="" name="choices-single-defaul" class="nowOrLater" onchange="hideTimeAndDataPicker()">
                                        <option placeholder="" value="Now">Now</option>
                                        <option value="Later">Later</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="input-wrap" id="timediv" style="display: none">
                            <div class="icon-wrap">
                                <svg xmlns="http://www.w3.org/2000/svg" width="612" height="612" viewBox="0 0 612 612">
                                    <path d="M234.709,488.739l23.402-52.086l23.394,52.086H234.709z M77.87,331.9l52.086-23.402L77.87,285.104V331.9z M258.111,180.351   l23.394-52.085H234.71L258.111,180.351z M360.926,205.769l-41.549,92.568c3.176,19.145-2.549,39.494-17.289,54.232   c-14.738,14.739-35.086,20.464-54.232,17.289l-92.568,41.548l41.548-92.567c-3.175-19.145,2.549-39.494,17.289-54.233   c14.738-14.739,35.087-20.464,54.232-17.288L360.926,205.769z M272.88,293.814c-8.145-8.145-21.4-8.145-29.545,0   c-8.145,8.146-8.145,21.4,0,29.545c8.146,8.146,21.4,8.146,29.545,0C281.025,315.215,281.025,301.959,272.88,293.814z    M438.344,331.9v-46.795l-52.086,23.394L438.344,331.9z M598.211,601.126c1.797,6.316-3.916,12.21-10.285,10.608L453.25,577.884   c-6.369-1.601-8.616-9.496-4.046-14.212l15.678-16.173c3.279-3.383,3.195-8.783-0.188-12.062l-44.859-43.489   c-43.152,38.106-99.768,61.302-161.728,61.302c-134.909,0-244.663-109.756-244.663-244.663   c0-115.083,86.488-243.566,244.663-243.566c66.785,0,120.311,22.302,160.103,56.588l46.482-45.058   c3.383-3.28,3.467-8.68,0.188-12.062l-15.675-16.17c-4.571-4.716-2.323-12.612,4.046-14.211L587.937,0.266   c6.368-1.601,12.081,4.294,10.283,10.61L560.2,144.435c-1.798,6.316-9.759,8.318-14.33,3.603l-15.674-16.169   c-3.279-3.383-8.681-3.467-12.063-0.187l-50.602,49.051c23.349,39.495,35.239,84.619,35.239,127.855   c0,45.234-12.387,87.61-33.877,124l49.233,47.729c3.383,3.279,8.784,3.196,12.063-0.188l15.68-16.175   c4.57-4.716,12.532-2.714,14.329,3.603L598.211,601.126z M455.012,308.588c0-108.571-88.33-196.906-196.905-196.906   c-108.574,0-196.905,88.335-196.905,196.906c0,108.57,88.331,196.904,196.905,196.904   C366.681,505.492,455.012,417.158,455.012,308.588z"></path>
                                </svg>
                            </div>
                            <div class="input-field">
                                <label>Time</label>
                                <input class="timepicker" type="text" placeholder="hh/mm" />
                            </div>
                        </div>
                        <div class="input-wrap" id="datediv" style="display: none">
                            <div class="icon-wrap">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path>
                                </svg>
                            </div>
                            <div class="input-field">
                                <label>Date</label>
                                <input class="datepicker" type="text" placeholder="mm/dd/yy" />
                            </div>
                        </div>
                    </div>
                    <div class="row last">
                        <button type="button" id="searchButtonforSmallScreen" class="searchInformation menuToggle">Search</button>
                        <button type="button" id="searchButtonforBigScreen" class="searchInformation">Search</button>
                    </div>
                </div>
            </div>
            <div class="information">
                <div class="incidents">
                    <div class="incident1" style="height: 25%; width: 100%; text-align: center"></div>
                    <div class="incident1" style="height: 25%; width: 100%; text-align: center"></div>
                    <!--
        <div class="incident1" style="height: 25%; width: 100%; text-align: center; vertical-align: middle"><object data="{% static "images/evaent.svg" %}" type="image/svg+xml" height="40%"></object></div>
        <div class="incident1" style="height: 25%; width: 100%; text-align: center; vertical-align: middle"><object data="{% static "images/coanstruction.svg" %}" type="image/svg+xml" height="40%"></object></div>
-->
                </div>
                <div class="routes">
                    <div class="icons">
                        <div class="icon1" style="height: 100%; width: 20%; float: left; text-align: center"><object data="{% static "images/clock.svg" %}" type="image/svg+xml" height="80%"></object></div>
                        <div class="icon2" style="height: 100%; width: 60%; float: left; text-align: center"><object data="{% static "images/bus.svg" %}" type="image/svg+xml" height="80%"></object></div>
                        <div class="icon3" style="height: 100%; width: 20%; float: left; text-align: center"><object data="{% static "images/euro.svg" %}" type="image/svg+xml" height="80%"></object></div>
                    </div>
                    <div class="details">
                    </div>
                </div>
            </div>
        </form>
    </div>
</nav>
<button class="menuToggle" id="startjourney">Start Journey</button>


<!--JavaScript Part-->
<script>
 (function ($) {
     // Menu functions
     $(document).ready(function () {
         $('.menuToggle').click(function (e) {
             $('#menuToggleIcon').css('display','block'); 
             var $parent = $('.menuToggle').parent('nav');
             $parent.toggleClass("open");
             $(this).attr("Go Back");
             // Set the timeout to the animation length in the CSS
             e.preventDefault();
         });
     });
 })(jQuery);
    
    
 (function ($) {
     // Menu functions
     $(document).ready(function () {
         $('#menuToggleIcon').click(function (e) {
            $('#menuToggleIcon').css('display','none');
             e.preventDefault();
         });
     });
 })(jQuery);

    
 (function ($) {
     // Menu functions
     $(document).ready(function () {
         $('#searchButtonforSmallScreen').click(function (e) {
            $('#menuToggleIcon').css('display','none');
             e.preventDefault();
         });
     });
 })(jQuery);
</script>

    {#<script src="static/js/choices.js"></script>#}
    <script src="{% static "js/choices.js" %}"></script>
<script>
      const choices = new Choices('[data-trigger]',
      {
        searchEnabled: false,
        itemSelectText: '',
      });

</script>

{#      <script src="static/js/flatpickr.js"></script>#}
<script src="{% static "js/flatpickr.js" %}"></script>

<script>
    flatpickr(".datepicker", {
        dateFormat: "m/d/y",
        minDate: "today"
    });
    var btnTypes = document.querySelectorAll('.travel-type-wrap .item')
    var mainForm = document.getElementById('main-form')
    for (let i = 0; i < btnTypes.length; i++) {
        btnTypes[i].addEventListener('click', function() {
            for (let i = 0; i < btnTypes.length; i++) {
                btnTypes[i].classList.remove('active')
            }
            btnTypes[i].classList.add('active')
            let className = 'type' + i
            mainForm.className = `${className} main-form`
        })
    }
</script>

<script>
    flatpickr(".timepicker", {
        enableTime: true,
        noCalendar: true,
        dateFormat: "H:i",
        time_24hr: true
    });
    var btnTypes = document.querySelectorAll('.travel-type-wrap .item')
    var mainForm = document.getElementById('main-form')
    for (let i = 0; i < btnTypes.length; i++) {
        btnTypes[i].addEventListener('click', function() {
            for (let i = 0; i < btnTypes.length; i++) {
                btnTypes[i].classList.remove('active')
            }
            btnTypes[i].classList.add('active')
            let className = 'type' + i
            mainForm.className = `${className} main-form`
        })
    }
</script>
    
    
    
    
    
    
<script>
    // Get the local URL
    var getUrl = window.location;
    //Set the format of URL
    var map_Url = getUrl.protocol + "//" + getUrl.host + "/";
    //Google Map initial function
    function initMap() {
        var infoWindow = new google.maps.InfoWindow();
        var latlngbounds = new google.maps.LatLngBounds();
        var MapOption = {
            center: {
                lat: 53.350140,
                lng: -6.266155
            },
            zoom: 14,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map'), MapOption);
        //Using Jinja2, loading JSON file about bus stop information when the page is loaded instead of requesting JSON data later
        var markers = {{JSONdata | safe}};
        for (var i = 0; i < 30; i++) {
            var busstop = markers[i];
            var myLatlng = {
                lat: busstop[2],
                lng: busstop[3]
            };
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                animation: google.maps.Animation.DROP,
                //Customize the style of markers on the map
                icon: "https://img.icons8.com/color/48/000000/map-pin.png"
            });

            //A function that shows the information of a bus stop when users click on a marker
            (function(marker, busstop) {
                google.maps.event.addListener(marker, "click", function(e) {
                    infoWindow.setContent("<div style = 'width: 200px; min-height: 40px; font-style: italic; font-weight: 800'>" + "Stop ID: " + busstop[0] + "<br>" + "Address: " + busstop[1] + "</div>");
                    infoWindow.open(map, marker);
                });
            })(marker, busstop);
            latlngbounds.extend(marker.position);
        }

        //A function to implement autocomplete about stop names with stop ID
        $(function() {
            var stopset = [];
//            var start_stop_id;
            for (var i = 0; i < markers.length; i++) {
//            if (markers[i][0].substring(markers[i][0].length-4)[0] == 0 && markers[i][0].substring(markers[i][0].length-4)[1] != 0) {
//              start_stop_id = markers[i][0].substring(markers[i][0].length-4)[1] + markers[i][0].substring(markers[i][0].length-4)[2] + markers[i][0].substring(markers[i][0].length-4)[3];
//            }
//            else if (markers[i][0].substring(markers[i][0].length-4)[0] == 0 && markers[i][0].substring(markers[i][0].length-4)[1] == 0 && markers[i][0].substring(markers[i][0].length-4)[2] != 0) {
//              start_stop_id = markers[i][0].substring(markers[i][0].length-4)[2] + markers[i][0].substring(markers[i][0].length-4)[3];
//            }
//            else if (markers[i][0].substring(markers[i][0].length-4)[0] == 0 && markers[i][0].substring(markers[i][0].length-4)[1] == 0 && markers[i][0].substring(markers[i][0].length-4)[2] == 0 && markers[i][0].substring(markers[i][0].length-4)[3] != 0) {
//              start_stop_id = markers[i][0].substring(markers[i][0].length-4)[3];
//            }
//            else if (markers[i][0].substring(markers[i][0].length-4)[0] != 0) {
//              start_stop_id = markers[i][0].substring(markers[i][0].length-4)[0] + markers[i][0].substring(markers[i][0].length-4)[1] + markers[i][0].substring(markers[i][0].length-4)[2] + markers[i][0].substring(markers[i][0].length-4)[3];
//            }
            stopset[i] = markers[i][1] + " (Stop " + markers[i][0] + ")";
            }
            $(".locationInput").autocomplete({
                source: deleteDuplicatedStops(stopset)
            });
        });
    }


//Delete repeated options since some stops have the exactly same address even they have different stop IDs
function deleteDuplicatedStops(array) {
    var finalstopset = [];
    for (var i = 0; i < array.length; i++) {
        if (finalstopset.indexOf(array[i]) === -1) {
            finalstopset.push(array[i]);
        }
    }
    return finalstopset;
}


//Hide time and data pickers when the time to go is chosen as "Now", and show them when "Later" is chosen.
function hideTimeAndDataPicker() {
    if ($('#timediv').css("display") == "none" && $('#datediv').css("display") == "none") {
        $("#timediv").show();
        $("#datediv").show();
    } else {
        $("#timediv").hide();
        $("#datediv").hide();
    }
}


//Submit the location of start and destination based on stopID and then the routes will be shown on the map
$('.searchInformation').click(function() {
    var start_stop_code = $('#startInput').val().substring($('#startInput').val().indexOf("(Stop") + 6, $('#startInput').val().length - 1);
    var end_stop_code = $('#destitationInput').val().substring($('#destitationInput').val().indexOf("(Stop") + 6, $('#destitationInput').val().length - 1);
//    var start_code_pass_to_backend;
//    var end_code_pass_to_backend;
//    if (start_stop_code.length == 1) {
//       start_code_pass_to_backend = "8220DB00000" + String(start_stop_code);
//    }
//    else if (start_stop_code.length == 2) {
//       start_code_pass_to_backend = "8220DB0000" + String(start_stop_code);
//    }
//    else if (start_stop_code.length == 3) {
//       start_code_pass_to_backend = "8220DB000" + String(start_stop_code);
//    }
//    else if (start_stop_code.length == 4) {
//       start_code_pass_to_backend = "8220DB00" + String(start_stop_code);
//    }
//    
//    if (end_stop_code.length == 1) {
//       end_code_pass_to_backend = "8220DB00000" + String(end_stop_code);
//    }
//    else if (end_stop_code.length == 2) {
//       end_code_pass_to_backend = "8220DB0000" + String(end_stop_code);
//    }
//    else if (end_stop_code.length == 3) {
//       end_code_pass_to_backend = "8220DB000" + String(end_stop_code);
//    }
//    else if (end_stop_code.length == 4) {
//       end_code_pass_to_backend = "8220DB00" + String(end_stop_code);
//    }
//    var startstop = parseInt($('#startInput').val().substring($('#startInput').val().indexOf("(") + 6, $('#startInput').val().indexOf(")")));
//    var endstop = parseInt($('#destitationInput').val().substring($('#destitationInput').val().indexOf("(") + 6, $('#destitationInput').val().indexOf(")")));
    var startstop = parseInt(start_stop_code);
    var endstop = parseInt(end_stop_code);
    var infoWindow = new google.maps.InfoWindow();
    var latlngbounds = new google.maps.LatLngBounds();
    var markers = {{JSONdata | safe}};
    for (var i = 0; i < markers.length; i++) {
        var busstop = markers[i];
    }
//    alert(startstop.length);
//Ajax, get information from the specific url
    $.ajax({
        url: map_Url + "routes",
        async: false,
        data: {
            startstop: startstop,
            endstop: endstop
        },
        success: function(result) {
            var MapOption = {
                center: {
                    lat: 53.350140,
                    lng: -6.266155
                },
                zoom: 14,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map2 = new google.maps.Map(document.getElementById('map'), MapOption);
            var commonroutes = result.routes_data;
            var pathArray = new Array();
            for (var i = 0; i < commonroutes.length; i++) {
                for (var j = 0; j < commonroutes[i].all_stops_list.length; j++) {
                    var routeLat = commonroutes[i].all_stops_list[j].stop_lat;
                    var routeLng = commonroutes[i].all_stops_list[j].stop_lng;
                    var myLatlng = {
                        lat: parseFloat(routeLat),
                        lng: parseFloat(routeLng)
                    };
                    //            var firststop = {lat: parseFloat(commonroutes[i].stops[0].latitude), lng: parseFloat(commonroutes[i].stops[0].longitude)};
                    //            var laststop = {lat: parseFloat(commonroutes[i].stops[commonroutes[i].stops.length - 1].latitude), lng: parseFloat(commonroutes[i].stops[commonroutes[i].stops.length - 1].longitude)};
                    pathArray.push(myLatlng)
                    var marker = new google.maps.Marker({
                        position: myLatlng,
                        map: map2,
                        animation: google.maps.Animation.DROP,
                        icon: "https://img.icons8.com/color/48/000000/map-pin.png"
                    });
                    (function(marker, busstop) {
                        google.maps.event.addListener(marker, "click", function(e) {
                            infoWindow.setContent("<div style = 'width: 200px; min-height: 40px; font-style: italic; font-weight: 800'>" + "Stop ID: " + busstop[0] + "<br>" + "Address: " + busstop[1] + "</div>");
                            infoWindow.open(map2, marker);
                        });
                    })(marker, busstop);
                    latlngbounds.extend(marker.position);
                }
            }
            //Draw polylines between bus stops based on their order
            var flightPath = new google.maps.Polyline({
                path: pathArray,
                geodesic: true,
                strokeColor: '#d7f542',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
//                    flightPath.setMap(map2);
//                    map2.removeOverlay(deleteArray);
        }
    });
})
</script>




<!--
<script>
//Fare calculator
$('.searchInformation').click(function() {
 $.ajax({
        url: map_Url + "prices",
        data: {
            LineID: "4",   //Route
            Number: 9  //Number of stops a user has travelled
        },
        async: false,
        Datatype:'json',
        type:'GET',
        success: function(result) {
        var price = result.prices;
        var Adult_Cash = price[0]['Adult_Cash'];
        var Adult_Leap = price[0]['Adult_Leap'];
        var Child_Cash_16 = price[0]['Child_Cash_16'];
        var Child_Cash_19 = price[0]['Child_Cash_19'];
        var School_Hours_Cash = price[0]['School_Hours_Cash'];
        var School_Hours_Leap = price[0]['School_Hours_Leap'];
//        alert("Adult Cash: €" + Adult_Cash + "\n" + "Adult with Leap Card: €" + Adult_Leap + "\n" + "Child Cash(Under 16): €" + Child_Cash_16 + "\n" + "Child with Leap Card(Under 19): €" + Child_Cash_19)
    },
        error: function(result) {
            if (Number >= 1 && Number <= 3) {
//                alert("Adult Cash: €" + "2.15" + "\n" + "Adult with Leap Card: €" + "1.55" + "\n" + "Child Cash(Under 16): €" + "1.30" + "\n" + "Child with Leap Card(Under 19): €" + "1.00")
            }
            else if (Number > 3 && Number <= 13) {
//                alert("Adult Cash: €" + "3.00" + "\n" + "Adult with Leap Card: €" + "2.25" + "\n" + "Child Cash(Under 16): €" + "1.30" + "\n" + "Child with Leap Card(Under 19): €" + "1.00")
            }
            else {
//                alert("Adult Cash: €" + "3.30" + "\n" + "Adult with Leap Card: €" + "2.50" + "\n" + "Child Cash(Under 16): €" + "1.30" + "\n" + "Child with Leap Card(Under 19): €" + "1.00")
            }
        }
}) 
  })   
</script>
-->






























<!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
-->
 <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAR48jLtATZO3aZWwS9CICs4Q8CDGpzVm8&callback=initMap" async defer></script>
</body>
</html>
